is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
bind-key -n C-h         if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind-key -n C-j         if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind-key -n C-k         if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind-key -n C-l         if-shell "$is_vim" "send-keys C-l" "select-pane -R"
bind-key -n M-h         split-window -v -c "#{pane_current_path}"
bind-key -n M-l         send-keys C-l
bind-key -n M-z         resize-pane -Z
bind-key -n M-t         new-window -a -c "#{pane_current_path}" -n new
bind-key -n M-v         split-window -h -c "#{pane_current_path}"
bind-key -nr M-Up       resize-pane -U
bind-key -nr M-Down     resize-pane -D
bind-key -nr M-Left     resize-pane -L
bind-key -nr M-Right    resize-pane -R
bind-key -n S-Left      previous-window
bind-key -n S-Right     next-window
bind-key -n C-Left      swap-window -t -1
bind-key -n C-Right     swap-window -t +1

unbind-key -n C-b
set -qg prefix C-_
bind-key C-_ send-prefix
bind-key C-b send-keys C-b
set-option -g prefix2 C-b
