######  Tmux Plugins  #######
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-battery'

run '~/.tmux/plugins/tpm/tpm'
#############################

is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"

bind-key -n M-h split-window -v -c "#{pane_current_path}"
bind-key -n M-l send-keys C-l
bind-key -n M-t new-window -a -c "#{pane_current_path}" -n new
bind-key -n M-v split-window -h -c "#{pane_current_path}"
bind-key -nr M-Up resize-pane -U
bind-key -nr M-Down resize-pane -D
bind-key -nr M-Left resize-pane -L
bind-key -nr M-Right resize-pane -R
bind-key -n C-Left           previous-window
bind-key -n C-Right          next-window
bind-key -n S-Left           swap-window -t -1
bind-key -n S-Right          swap-window -t +1

set-option buffer-limit 20
set-option default-terminal "screen-256color"
set-option exit-unattached off
set-option focus-events off
set-option history-file "(null)"
set-option message-limit 100
set-option quiet off
set-option set-clipboard on
set-option terminal-overrides "xterm*:XT:Ms=\E]52;%p1%s;%p2%s\007:Cs=\E]12;%p1%s\007:Cr=\E]112\007:Ss=\E[%p1%d q:Se=\E[2 q,screen*:XT"

set -s escape-time 0
set-option -g assume-paste-time 1
set-option -g base-index 1
set-option -g bell-action any
set-option -g bell-on-alert off
set-option -g default-shell "/bin/bash"
set-option -g destroy-unattached off
set-option -g detach-on-destroy on
set-option -g display-panes-active-colour red
set-option -g display-panes-colour blue
set-option -g display-panes-time 1000
set-option -g display-time 750
set-option -g history-limit 50000
set-option -g lock-after-time 0
set-option -g lock-command "lock -np"
set-option -g message-command-style fg=yellow,bg=black
set-option -g message-style fg=black,bg=yellow
set-option -g mouse off
set-option -g mouse-utf8 on
set-option -g prefix C-_
set-option -g renumber-windows on
set-option -g repeat-time 100
set-option -g set-remain-on-exit off
set-option -g set-titles off
set-option -g set-titles-string "#S:#I:#W - "#T" #{session_alerts}"
set-option -g status on
set-option -g status-interval 15
set-option -g status-justify left
set-option -g status-keys emacs
set-option -g status-style fg=colour16,bg=colour2
set-option -g status-left "#[bg=colour8,fg=colour2] #S #[bg=colour2,fg=colour8]⮀"
set-option -g status-left-length 10
set-option -g status-position top
set-option -g status-right '#[bg=colour2,fg=colour238]⮂#[bg=colour238,fg=colour11] #h #[bg=colour238,fg=colour8]⮂#[bg=colour8,fg=colour2] %m/%d/%y %I:%M '
set-option -g status-right-length 60
set-option -g status-right-style default
set-option -g status-utf8 on
set-option -g update-environment "DISPLAY SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"
set-option -g visual-activity on
set-option -g visual-bell off
set-option -g visual-silence off
set-option -g word-separators " -_@"

set-option -gw aggressive-resize off
set-option -gw allow-rename on
set-option -gw alternate-screen on
set-option -gw automatic-rename on
set-option -gw automatic-rename-format "#{?pane_in_mode,[tmux],#{pane_current_command}}#{?pane_dead,[dead],}"
set-option -gw clock-mode-colour blue
set-option -gw clock-mode-style 24
set-option -gw force-height 0
set-option -gw force-width 0
set-option -gw main-pane-height 24
set-option -gw main-pane-width 80
set-option -gw mode-keys vi
set-option -gw mode-style fg=black,bg=yellow
set-option -gw monitor-activity on
set-option -gw monitor-silence 0
set-option -gw other-pane-height 0
set-option -gw other-pane-width 0
set-option -gw pane-active-border-style fg=green
set-option -gw pane-base-index 1
set-option -gw pane-border-style default
set-option -gw remain-on-exit off
set-option -gw synchronize-panes off
set-option -gw utf8 on
set -g status-utf8 on
set-option -gw window-active-style default
set-option -gw window-style default
set-option -gw window-status-activity-style fg=colour15,bold
set-option -gw window-status-bell-style reverse

set-option -gw window-status-current-format "#[fg=colour2]⮀ #[fg=colour7]#I:#W #[fg=colour8,bg=colour2]⮀"
set-option -gw window-status-current-style fg=colour7,bg=colour8,bright
set-option -gw window-status-format " #I:#W ⮁"
set-option -gw window-status-last-style default
set-option -gw window-status-separator ""
set-option -gw window-status-style default
set-option -gw wrap-search on
set-option -gw xterm-keys on

set -g @shell_mode 'vi'
